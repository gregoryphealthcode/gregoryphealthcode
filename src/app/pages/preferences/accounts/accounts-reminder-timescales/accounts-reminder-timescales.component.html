<dx-popup #editTimescalesPopup name="editTimescalesPopup" title="Edit Reminder Timescales"
    (onInitialized)="appInfo.disableESC($event)" contentTemplate="popupContent" [width]="'auto'" [resizeEnabled]="true"
    [height]="'auto'" titleTemplate="title" *ngIf="editTimescales" class="custom" [deferRendering]="true"
    [maxWidth]="'100vw'" [maxHeight]="'100vh'" [visible]="true">

    <div *dxTemplate="let data of 'popupContent'">
        <div class="card m-1 p-1">
            <div class="row">
                <div class="col-sm-6 col-form-label">
                    Reminder 1 (Days delay from Invoice):
                </div>

                <div class="col-sm-3">
                    <dx-number-box #editreminder1textbox id="editreminder1textbox" [(value)]="reminder1Timescale">
                    </dx-number-box>
                </div>
            </div>

            <div class="row">
                <div class="col-sm-6 col-form-label">
                    Reminder 2 (Days delay from reminder 1):
                </div>

                <div class="col-sm-3">
                    <dx-number-box #editreminder2textbox id="editreminder2textbox" [(value)]="reminder2Timescale">
                    </dx-number-box>
                </div>
            </div>

            <div class="row">
                <div class="col-sm-6 col-form-label">
                    Reminder 3 (Days delay from reminder 2):
                </div>

                <div class="col-sm-3">
                    <dx-number-box #editreminder3textbox id="editreminder3textbox" [(value)]="reminder3Timescale">
                    </dx-number-box>
                </div>
            </div>

            <div class="row">
                <div class="col-sm-6 col-form-label">
                    Reminder 4 (Days delay from reminder 3):
                </div>

                <div class="col-sm-3">
                    <dx-number-box #editreminder4textbox id="editreminder4textbox" [(value)]="reminder4Timescale">
                    </dx-number-box>
                </div>
            </div>

            <div class="row">
                <div class="col-sm-6 col-form-label">
                    Reminder 5 (Days delay from reminder 4):
                </div>

                <div class="col-sm-3">
                    <dx-number-box #editreminder5textbox id="editreminder5textbox" [(value)]="reminder5Timescale">
                    </dx-number-box>
                </div>
            </div>

            <div class="row">
                <div class="col-sm-6 col-form-label">
                    Repeat (resend reminder 5 every x days):
                </div>

                <div class="col-sm-3">
                    <dx-number-box #editrepeattextbox id="editrepeattextbox" [(value)]="repeatTimescale">
                    </dx-number-box>
                </div>
            </div>

            <div class="row"></div>

            <div class="row text-center float-none ml-auto mr-auto">
                <div class="col-sm-12 mx-auto text-center m-2">
                    <button mat-button class="app-button primary grid-header-btn mx-1"
                        (click)="editOKClicked($event)">Save</button>
                </div>
            </div>
        </div>
    </div>

    <div *dxTemplate="let data of 'title'" class="d-flex flex-row justify-content-end align-items-center px-0">
        <div class="d-flex flex-column flex-grow-1 justify-content-center ml-3 px-0">
            <span class="text-sm-3 text-grey-40">Edit Reminder Timescales </span>
        </div>

        <div class="d-flex flex-column justify-content-end align-items-center px-0">
            <button mat-icon-button class="icon alternative popup-close-btn" (click)="editTimescales = false"
                matTooltip="Close popup">
                <mat-icon>clear</mat-icon>
            </button>
        </div>
    </div>
</dx-popup>

<div class="page-header">Invoice Reminder Timescales</div>

<div class="d-flex flex-grow-1">
    <!-- cell 1 -->
    <div class="app-card   flex-grow-1">
        <div class="cssWidgetWrapper">
            <dx-data-grid [dataSource]="reminders" class="cssGridGeneral" [remoteOperations]="false"
                [allowColumnReordering]="false" [showColumnLines]="true" [showRowLines]="true" [showBorders]="true"
                [rowAlternationEnabled]="true" [focusedRowEnabled]="true" focusedRowIndex="0" keyExpr="this"
                [allowColumnResizing]="true" [columnHidingEnabled]="true"
                (onFocusedRowChanged)="onFocusedRowChanged($event)" columnResizingMode="widget" [columnMinWidth]="175">

                <dxi-column dataField="invoiceType" caption="Invoice To"></dxi-column>
                <dxi-column dataField="reminder1DaysDelayFromInv" caption="Reminder1"></dxi-column>
                <dxi-column dataField="reminder2DaysDelayFromReminder1" caption="Reminder2"></dxi-column>
                <dxi-column dataField="reminder3DaysDelayFromReminder2" caption="Reminder3"></dxi-column>
                <dxi-column dataField="reminder4DaysDelayFromReminder3" caption="Reminder4"></dxi-column>
                <dxi-column dataField="reminder5DaysDelayFromReminder4" caption="Reminder5"></dxi-column>
                <dxi-column dataField="reminder5RepeatEveryXDays" caption="Repeat"></dxi-column>
                <dxi-column type="buttons" dataField="id" caption="Action">
                    <dxi-button template="myCommandTemplate"></dxi-button>
                </dxi-column>

                <div *dxTemplate="let data of 'myCommandTemplate'">
                    <button mat-icon-button class="alternative icon" (click)="edit(data.key)" matTooltip="Edit">
                        <mat-icon fontSet="fa" fontIcon="fa-edit"></mat-icon>
                    </button>
                </div>
            </dx-data-grid>
        </div>
    </div>
</div>