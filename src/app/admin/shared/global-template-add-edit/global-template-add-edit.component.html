<dx-popup appCentralPopUpSettings [width]="'500'" *ngIf="show" [enableScroll]="true"
    (onInitialized)="appInfo.disableESC($event)">
    <div *dxTemplate="let data of 'popupContent'" class="popup-wrapper">
        <app-pop-up-form-title [title]="isNew ? 'New Template' : 'Edit Template'" (closed)="closeForm()">
        </app-pop-up-form-title>

        <div class="central-popup-wrapper">
            <div class="central-popup-body" appEnterKeyFocusWrapper delay="750" [formGroup]="editForm">
                <app-select-box *ngIf="isNew" [dataSource]="templateCategories" direction="row"
                    formControlName="templateCategory" valueExpr="uniqueNo" displayExpr="description"
                    caption="Template Category">
                </app-select-box>

                <app-select-box *ngIf="isNew" [dataSource]="templateTypes" direction="row" formControlName="typeId"
                    valueExpr="uniqueNo" displayExpr="description" caption="Template Type" [disabled]="!isNew">
                </app-select-box>

                <ng-container *ngIf="newUpload">
                    <div class="d-flex flex-row flex-grow-1 mb-3 ml-auto">
                        <div class="d-flex flex-column border-2-blue p-10px">
                            <div class="d-flex flex-row flex-grow-1 w-306px">
                                <form method="post" enctype="multipart/form-data">
                                    <dx-file-uploader #fileUploader name="fileUploader" [multiple]="false"
                                        selectButtonText="Select File" labelText="  or drop file here"
                                        [maxFileSize]="25000000" [allowedFileExtensions]="['.doc', '.docx']"
                                        [(value)]="uploadFilesValue" uploadMode="useButtons"
                                        [uploadHeaders]="uploadheaders()" (onValueChanged)="fileUploaded($event)"
                                        uploadFailedMessage="Added">
                                    </dx-file-uploader>
                                </form>
                            </div>

                            <div class="d-flex flex-row w-306px">
                                Allowed file extensions:
                                <br />
                                .doc, .docx
                                <br />
                                <br />
                                Maximum file size: 25 MB.
                            </div>
                        </div>
                    </div>
                </ng-container>

                <ng-container *ngIf="!newUpload">
                    <div class="d-flex flex-row w-100 mt-2 mb-3 align-items-center">
                        <span class="w-140px">File </span>
                        <span>{{template?.fileName}}</span>
                        <!-- <a class="download pointer" title="{{template?.file?.name}}"
                            (click)="downloadFile()">{{template?.file?.name}}</a> -->

                        <!--  <app-button icon="far fa-trash" type="link" color="grey" class="ml-auto"
                            matTooltip="Delete file" (clicked)="deleteFile()"></app-button> -->
                    </div>
                </ng-container>

                <app-text-box formControlName="description" direction="row" caption="Description"
                    [capitalizeEachWord]="true">
                </app-text-box>

                <app-text-area-box formControlName="comments" direction="row" caption="Comments"
                    class="text-area-standard-height">
                </app-text-area-box>

                <!--  <app-slide-toggle formControlName="isPatientZone" class="md-height" direction="row"
                    caption="Patientzone">
                </app-slide-toggle>

                <app-slide-toggle *ngIf="!isNew" formControlName="active" class="md-height" direction="row"
                    caption="Active">
                </app-slide-toggle> -->
            </div>

            <!-- Footer -->
            <div class="popup-form-footer-wrapper">
                <app-button text="Close" class="ml-auto mr-3" (clicked)="closeForm()" color="grey"></app-button>

                <app-button text="Save" (clicked)="submitForm()" [disabled]="!editForm.valid"></app-button>
            </div>
        </div>
    </div>
</dx-popup>